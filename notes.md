## Immediate TODOs

* For many languages, Wiktionary makes a distinction between a term's "entryName" (i.e., the written form that acts as the title of its corresponding page, which is captured in wiktextract's `word` field.) and any "canonical" or otherwise used forms of the term as they may appear in etymology sections. For example, in Latin, macrons are omitted for a term's entryName, while macrons are supposed to be included in etymology sections (and therefore, in arguments in etymology templates). This leads to problems when trying to link a form listed in some etymology template argument with a corresponding wiktextract `word`. The rules for transforming a form of a term to its entryName form are contained in [Module:languages](https://en.wiktionary.org/wiki/Module:languages). In particular, the `Language:makeEntryName` function makes this conversion by applying specific rules for each language provided in the module's data submodules. For many languages, the rules are fairly simple character substitutions; but for others, the rules are a module unto themselves.  Therefore it would not be completely trivial to recreate all this behavior de novo. My plan is to run the lua code directly from within the rust program to generate `entryName`s for all terms listed in etymology templates, so they can be appropriately linked with their corresponding entries.
    * N.B. the "canonical" form is often listed in wiktextract entries in `forms[0].form` when `forms[0].tags[0]` == `canonical` (However, the canonical form is not guaranteed to be the first listed. To be completely correct, need to search for canonical tag in while loop (However, forms list is often quite long, and e.g. Latin seems always to have canonical first... might try hacky approach of just checking `forms[0]` to start...). Also, `forms` itself is an optional field, (at least in PIE root entries)). We should probably retain this canonical representation as a field in each Item. 

* A number of affix templates (but not the `affix` template itself, notably) modify one or more of their term arguments when expanded, so that the raw text of the term argument is not exactly equivalent to the text of the relevant linked wiktionary entry. So if we were to naively follow the exact raw text in the template, we would end up in the wrong spot, if anywhere. We need to identify all templates that do any modification to any of their template term arguments, and replicate this modification in wety so that the correct term entries are linked. Here is a provisional list:
    * [Prefix](https://en.wiktionary.org/wiki/Template:prefix): `{{prefix|en|un|do}}` -> `un-` + `do`
    * [Suffix](https://en.wiktionary.org/wiki/Template:suffix): `{{suffix|en|do|ing}}` -> `do` + `-ing`
    * [Circumfix](https://en.wiktionary.org/wiki/Template:circumfix): `{{circumfix|nl|ver|giftig|en}}` -> `ver-` + `giftig` + `-en`
    * [Infix](https://en.wiktionary.org/wiki/Template:infix): `{{infix|en|house|iz}}` -> `house` + `-iz-` (for entry `hizouse`)
    * [Confix](https://en.wiktionary.org/wiki/Template:confix): `{{confix|en|neuro|genic}}` -> `neuro-` + `-genic`; `{{confix|en|be|dew|ed}}` -> `be-` + `dew` + `-ed`. That is, the first positional term arg is treated as a prefix, and the last positional term arg is treated as a suffix.

* Adding tracking of ety_nums and gloss_nums (so that informative unique item id can be generated) added about 1GB to RAM usage. If RAM becomes an issue, could try Vec implementation rather than the ugly tuples being used currently. Will be slower but should save RAM which is more of a concern.

## If ever out of immediate TODOs in this document, remember to ctrl+f "$" in project to find notes pointing out problems/todos.

## If in the future I attempt to process the entire etymology (i.e. all templates and text)
* Need to handle when ety entries have multiple ety's for some reason, e.g. https://en.wiktionary.org/wiki/hap#Etymology_1. A simple approach might be to only process the first paragraph, as often the different ety's are listed in different paragraphs. Unfortunately, the templates given in wiktextract data are not separated out into paragraphs, so this would involve processing a combination of the wiktextract ety text (which does preserve the newlines) and the templates list. This can be done by using the expansions given for each template and looking for them in the ety text. In case a template expansion appears multiple times in the ety text in different paragraphs, can compare the order of the templates in the template list with the order of expansions in the ety text to try to infer which paragraph the template appeared in.
* When processing the ety templates, deal with case where there is a valid chain of derivs but there is a term amid it that doesn't have an item entry, while a subsequent term in the chain does.
* Some etymologies on Wiktionary (e.g. https://en.wiktionary.org/wiki/astrology) have {{der}}-type chains followed by a template in this category which recapitulates the etymology through surface analysis. Simply treating all templates the same and chugging through the chain will result in a lot of bad ety connections. A simple provisional solution might be to only take the first compound-type template (with "1" parameter being the language of the item term), if one is present, discarding everything else. This will lose the actual historical etymology information if there is any (i.e. the derived-type chain), but might lead to most reliably far-reaching derivation chains.